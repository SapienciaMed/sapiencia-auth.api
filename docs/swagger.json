{"openapi":"3.0.0","info":{"title":"Documentación API Autenticación","version":"1.0.0","description":"Catalago de servicios"},"components":{"securitySchemes":{"apiAuth":{"type":"http","description":"Login with email and password to get the authentication token","name":"Token based Based","in":"header","bearerFormat":"JWT","scheme":"bearer"}},"schemas":{"RolesPaginated":{"type":"object","properties":{"id":{"type":"number","example":1},"name":{"type":"string","example":"Administrador"},"description":{"type":"string","example":"Administador del sistema"},"aplicationId":{"type":"string","example":1},"userModify":{"type":"string","example":"797940"},"dateModify":{"type":"date","example":"2023-06-27T09:40:02.350-05:00"},"userCreate":{"type":"string","example":"797940"},"dateCreate":{"type":"date","example":"2023-05-31T15:42:35.451-05:00"}}},"Roles":{"type":"object","properties":{"id":{"type":"number","example":1},"name":{"type":"string","example":"Administrador"},"description":{"type":"string","example":"Administador del sistema"},"aplicationId":{"type":"string","example":1},"userModify":{"type":"string","example":"797940"},"dateModify":{"type":"date","example":"2023-06-27T09:40:02.350-05:00"},"userCreate":{"type":"string","example":"797940"},"dateCreate":{"type":"date","example":"2023-05-31T15:42:35.451-05:00"},"actions":{"type":"array","example":[{"id":1,"optionId":1,"name":"Consultar Roles","order":"10","indicator":"ROLES_CONSULTAR","url":"/core/roles"},{"id":2,"optionId":1,"name":"Crear Rol","order":"20","indicator":"ROLES_CREAR","url":"/core/roles/crear"}]}}},"User":{"type":"object","properties":{"documentType":{"type":"string","example":"CC"},"documentNumber":{"type":"string","example":"234556677"},"names":{"type":"string","example":"Diana"},"lastNames":{"type":"string","example":"Perez"},"email":{"type":"string","example":"diana@buencom.com"},"gender":{"type":"string","example":"Femenino"},"phoneNumber":{"type":"string","example":""},"cellPhoneNumber":{"type":"string","example":""},"deparment":{"type":"string","example":"1"},"town":{"type":"string","example":"1"},"neighborhood":{"type":"string","example":"1"},"address":{"type":"string","example":"Cra 38"},"userCreated":{"type":"string","example":"jhon"},"createdDate":{"type":"string","example":"26/06/2023"},"modifiedUser":{"type":"string","example":"doe"},"modifiedDate":{"type":"string","example":"26/06/2023"}}}}},"paths":{"/api/v1/auth/signin":{"post":{"tags":["Auth"],"summary":"Permite iniciar sesión al usuario","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"numberDocument":{"type":"string","example":"784754"},"password":{"type":"string","example":"1234567"}}}}}},"produces":["application/json"],"responses":{"200":{"description":"OK","content":{"application/json":{"examples":{"Credenciales correctas":{"value":{"data":{"authorization":{"allowedActions":["ROLES_CONSULTAR","ROLES_CREAR","ROLES_EDITAR","ROLES_ELIMINAR"],"allowedApplications":[{"aplicationId":1,"dateValidity":"2024-05-31T20:42:36.822Z"},{"aplicationId":2,"dateValidity":"2024-05-31T20:42:36.822Z"},{"aplicationId":3,"dateValidity":"2024-05-31T20:42:36.822Z"},{"aplicationId":4,"dateValidity":"2024-05-31T20:42:36.822Z"}],"encryptedAccess":"","user":{"id":1,"names":"Usuario","lastNames":"Prueba","typeDocument":"CC","numberDocument":"797940","userModify":"","dateModify":"2023-06-26T10:36:36.862-05:00","userCreate":"","dateCreate":"2023-05-31T15:42:37.119-05:00","email":"jmbetancur@i4digital.com"}},"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNjg3Nzk3NjY0LCJleHAiOjE2ODc4MDEyNjR9.oGttLKms03FOtJhGGo1x33eDNXRD2QDSTXHmJrw6c4A"},"operation":{"code":"OK"}}},"Numero de documento incorrecto":{"value":{"data":null,"operation":{"code":"WARN","message":"Usuario no existe"}}},"Contraseña incorrecta":{"value":{"data":null,"operation":{"code":"WARN","message":"Credenciales invalidas"}}}}}}}}}},"/api/v1/auth/recoverypassword":{"post":{"tags":["Auth"],"summary":"Envia un correo electronico para recuperar la contraseña","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"numberDocument":{"type":"string","example":"784754"},"email":{"type":"string","example":"jhondoe@gmail.com"}}}}}},"produces":["application/json"],"responses":{"200":{"description":"OK","content":{"application/json":{"examples":{"Credenciales correctas":{"value":{"data":true,"operation":{"code":"OK"}}},"Numero de documento incorrecto":{"value":{"data":null,"operation":{"code":"WARN","message":"El documento de identidad no se encuentra registrada en el sistema"}}},"email incorrecto":{"value":{"data":null,"operation":{"code":"WARN","message":"Su correo no coincide con el registrado en el sistema"}}}}}}}}}},"/api/v1/auth/validateTokenRecovery":{"post":{"tags":["Auth"],"summary":"Valida el token de recuperar contraseña","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNjg3NDU4NDk0LCJleHAiOjE2ODc0NTkzOTR9.1vnXFWssx54iHqlZSW6Rxz8DKqHu8HO2SSOvspIBpgQ"}}}}}},"produces":["application/json"],"responses":{"200":{"description":"OK","content":{"application/json":{"examples":{"Token valido":{"value":{"data":{"id":1},"operation":{"code":"OK"}}}}}}},"400":{"description":"Bad request","content":{"application/json":{"examples":{"Token invalido":{"value":{"data":null,"operation":{"code":"FAIL","message":"TokenExpiredError: jwt expired"}}}}}}}}}},"/api/v1/auth/changePasswordRecovery":{"post":{"tags":["Auth"],"summary":"Cambia la contraseña validando el token de recuperar contraseña","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"password":{"type":"string","example":"1234567"},"confirmPassword":{"type":"string","example":"1234567"},"token":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNjg3NDU4NDk0LCJleHAiOjE2ODc0NTkzOTR9.1vnXFWssx54iHqlZSW6Rxz8DKqHu8HO2SSOvspIBpgQ"}}}}}},"produces":["application/json"],"responses":{"200":{"description":"OK","content":{"application/json":{"examples":{"Token valido y contraseñas iguales":{"value":{"data":{"id":1,"names":"Usuario","lastNames":"Prueba","typeDocument":"CC","numberDocument":"797940","userModify":"","dateModify":"2023-06-26T13:42:29.092-05:00","userCreate":"","dateCreate":"2023-05-31T15:42:37.119-05:00","email":"jmbetancur@i4digital.com"},"operation":{"code":"OK"}}}}}}},"403":{"description":"Forbidden","content":{"application/json":{"examples":{"Token invalido":{"value":{"data":null,"operation":{"code":"FAIL","message":"TokenExpiredError: jwt expired"}}}}}}}}}},"/api/v1/auth/authorization/get-by-token/{token}":{"get":{"parameters":[{"in":"path","name":"token","required":true}],"tags":["Auth"],"summary":"Permite al usuario obtener la autentificación","produces":["application/json"],"responses":{"200":{"description":"OK","content":{"application/json":{"examples":{"Token valido":{"value":{"data":{"allowedActions":["ROLES_CONSULTAR","ROLES_CREAR","ROLES_EDITAR","ROLES_ELIMINAR"],"allowedApplications":[{"aplicationId":1,"dateValidity":"2024-05-31T20:42:36.822Z"},{"aplicationId":2,"dateValidity":"2024-05-31T20:42:36.822Z"},{"aplicationId":3,"dateValidity":"2024-05-31T20:42:36.822Z"},{"aplicationId":4,"dateValidity":"2024-05-31T20:42:36.822Z"}],"encryptedAccess":"","user":{"id":1,"names":"Usuario","lastNames":"Prueba","typeDocument":"CC","numberDocument":"797940","userModify":"","dateModify":"2023-06-26T10:36:36.862-05:00","userCreate":"","dateCreate":"2023-05-31T15:42:37.119-05:00","email":"jmbetancur@i4digital.com"}},"operation":{"code":"OK"}}}}}}},"400":{"description":"Bad request","content":{"application/json":{"examples":{"Token invalido":{"value":{"data":null,"operation":{"code":"FAIL","message":"SyntaxError: Unexpected token � in JSON at position 20"}}}}}}}}}},"/api/v1/role/get-by-id/{id}":{"get":{"parameters":[{"in":"path","name":"id","schema":{"type":"number"},"required":true,"description":"Id del Rol a consultar"}],"tags":["Roles"],"summary":"Permite la consulta un rol en específico a traves de su id","produces":["application/json"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Roles"},"examples":{"Consulta":{"value":{"data":{"id":1,"name":"Administrador","description":"Administador del sistema","aplicationId":1,"userModify":null,"dateModify":null,"userCreate":"Default","dateCreate":"2023-05-31T15:42:35.451-05:00","actions":[{"id":1,"optionId":1,"name":"Consultar Roles","order":"10","indicator":"ROLES_CONSULTAR","url":"/core/roles"},{"id":2,"optionId":1,"name":"Crear Rol","order":"20","indicator":"ROLES_CREAR","url":"/core/roles/crear"},{"id":3,"optionId":1,"name":"Editar Roles","order":"30","indicator":"ROLES_EDITAR","url":"/core/roles/editar"},{"id":4,"optionId":1,"name":"Eliminar Roles","order":"40","indicator":"ROLES_ELIMINAR","url":null},{"id":5,"optionId":2,"name":"Consultar Perfil de Usuario","order":"10","indicator":"PERFILES_CONSULTAR","url":"/core/perfiles-usuario"},{"id":6,"optionId":2,"name":"Gestionar Perfiles de Usuario","order":"20","indicator":"PERFILES_GESTIONAR","url":"/core/perfiles-usuario/gestionar"},{"id":7,"optionId":3,"name":"Consultar Usuarios","order":"10","indicator":"USUARIOS_CONSULTAR","url":"/core/usuarios"},{"id":8,"optionId":3,"name":"Crear Usuario","order":"20","indicator":"USUARIOS_CREAR","url":"/core/usuarios/crear"},{"id":9,"optionId":3,"name":"Editar Usuario","order":"30","indicator":"USUARIOS_EDITAR","url":"/core/usuarios/editar"},{"id":10,"optionId":3,"name":"Eliminar Usuarios","order":"40","indicator":"USUARIOS_ELIMINAR","url":null}]},"operation":{"code":"OK"}}}}}}}},"security":[{"apiAuth":[]}]}},"/api/v1/role/get-paginated":{"post":{"tags":["Roles"],"summary":"Permite la consulta de roles por filtros y paginado","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"aplicationId":{"type":"number","example":1},"page":{"type":"number","example":1},"perPage":{"type":"number","example":10}}}}}},"produces":["application/json"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RolesPaginated"},"examples":{"Consulta":{"value":{"data":{"array":[{"id":1,"name":"Administrador","description":"Administador del sistema","aplicationId":1,"userModify":null,"dateModify":null,"userCreate":"Default","dateCreate":"2023-05-31T15:42:35.451-05:00"},{"id":278,"name":"prueba","description":"test","aplicationId":1,"userModify":null,"dateModify":null,"userCreate":"797940","dateCreate":"2023-06-27T09:40:02.350-05:00"}],"meta":{"total":2,"per_page":20,"current_page":null,"last_page":1,"first_page":1,"first_page_url":"/?page=1","last_page_url":"/?page=1","next_page_url":null,"previous_page_url":null}},"operation":{"code":"OK"}}}}}}}},"security":[{"apiAuth":[]}]}},"/api/v1/role/create":{"post":{"tags":["Roles"],"summary":"Permite la creación de un rol","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","example":"Usuario swagger"},"description":{"type":"string","example":"Usuario creado desde swagger"},"aplicationId":{"type":"number","example":1},"userCreate":{"type":"string","example":"swagger"},"actions":{"type":"array","example":[{"id":1,"optionId":1,"name":"Consultar Roles","order":10,"indicator":"ROLES_CONSULTAR","url":"/core/roles"},{"id":2,"optionId":1,"name":"Crear Rol","order":20,"indicator":"ROLES_CREAR","url":"/core/roles/crear"}]}}}}}},"produces":["application/json"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"applicationId":{"type":"number"},"userCreate":{"type":"string"},"dateCreate":{"type":"date"},"id":{"type":"number"}}},"examples":{"Creacion":{"value":{"data":{"name":"Usuario swagger","description":"Usuario creado desde swagger","aplicationId":1,"userCreate":"swagger","dateCreate":"2023-06-27T12:17:37.868-05:00","id":279},"operation":{"code":"OK"}}}}}}}},"security":[{"apiAuth":[]}]}},"/api/v1/role/update/{id}":{"put":{"parameters":[{"in":"path","name":"id","schema":{"type":"number"},"required":true,"description":"Id del Rol a actualizar"}],"tags":["Roles"],"summary":"Permite la actualización de un rol a traves de un id","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","example":"Usuario edit swagger"},"description":{"type":"string","example":"Usuario editado desde swagger"},"aplicationId":{"type":"number","example":1},"userModify":{"type":"string","example":"swaggerEdit"},"actions":{"type":"array","example":[{"id":1,"optionId":1,"name":"Consultar Roles","order":10,"indicator":"ROLES_CONSULTAR","url":"/core/roles"},{"id":2,"optionId":1,"name":"Crear Rol","order":20,"indicator":"ROLES_CREAR","url":"/core/roles/crear"}]}}}}}},"produces":["application/json"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"description":{"type":"string"},"applicationId":{"type":"number"},"userModify":{"type":"string"},"dateModify":{"type":"date"},"userCreate":{"type":"string"},"dateCreate":{"type":"date"}}},"examples":{"Actualizacion":{"value":{"data":{"id":281,"name":"Usuario edit swagger","description":"Usuario editado desde swagger","aplicationId":1,"userModify":"swaggerEdit","dateModify":"2023-06-27T17:55:07.620Z","userCreate":"swagger","dateCreate":"2023-06-27T12:34:16.936-05:00"},"operation":{"code":"OK"}}},"Rol no encontrado":{"value":{"data":{},"operation":{"code":"FAIL","message":"El registro indicado no existe"}}}}}}},"400":{"description":"Bad Request","content":{"application/json":{"examples":{"Error en datos":{"value":{"data":null,"operation":{"code":"FAIL","message":"ValidationException: E_VALIDATION_FAILURE: Validation Exception"}}}}}}}},"security":[{"apiAuth":[]}]}},"/api/v1/role/delete/{id}":{"delete":{"parameters":[{"in":"path","name":"id","schema":{"type":"number"},"required":true,"description":"Id del Rol a eliminar"}],"tags":["Roles"],"summary":"Permite la eliminación de un rol a traves de un id","produces":["application/json"],"responses":{"200":{"description":"OK","content":{"application/json":{"examples":{"Eliminar":{"value":{"data":true,"operation":{"code":"OK"}}},"Rol no encontrado":{"value":{"data":false,"operation":{"code":"FAIL","message":"El registro indicado no existe"}}}}}}}},"security":[{"apiAuth":[]}]}},"/api/v1/user/get-user-by-id/{id}":{"get":{"parameters":[{"in":"path","name":"id","schema":{"type":"number"},"required":true,"description":"Id del usuario"}],"tags":["Usuarios"],"summary":"Permite la consulta de un usuario por su ID","produces":["application/json"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/user"},"examples":{"Action":{"value":{"data":[{"id":1,"documentType":"Cédula de ciudadanía","documentNumber":"797940","names":"Usuario","lastNames":"Test","email":"pro39df@gmail.com","gender":"m","phoneNumber":null,"cellPhoneNumber":null,"deparment":"Antioquia","town":"Medellin","neighborhood":"Altavista","address":null,"createdDate":"26/06/2023","userCreated":"jhon","modifiedDate":"26/06/2023","modifiedUser":"doe"}],"operation":{"code":"OK","message":""}}}}}}}},"security":[{"apiAuth":[]}]}},"/api/v1/user/create":{"post":{"tags":["Usuarios"],"summary":"Crea un usuario","description":"Crea un usuario a partir de los campos requeridos.","operationId":"createUser","requestBody":{"description":"Crea un usuario a partir de los campos en un json.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"examples":{"Usuario Creado":{"value":{"data":{"names":"Juan","lastNames":"Pruebas","typeDocument":"CC","numberDocument":"123456789012","userModify":"Jhon","userCreate":"Doe","email":"jearistizabal@i4digital.com","dateModify":"2023-06-26T23:41:39.097-05:00","dateCreate":"2023-06-26T23:41:39.098-05:00","id":"9"},"operation":{"code":"OK"}}}}}}},"400":{"description":"Bad request","content":{"application/json":{"examples":{"Información invalida":{"value":{"data":null,"operation":{"code":"FAIL","message":"ValidationException: E_VALIDATION_FAILURE: Validation Exception"}}}}}}}}}}},"tags":[]}